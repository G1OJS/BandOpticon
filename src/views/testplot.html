<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Maidenhead Map Demo</title>
<style>
  body { margin:0; padding:0; background:#111; color:#ddd; font-family:sans-serif; }
  svg { background:#000022; display:block; margin:auto; }
  text { font-size:10px; fill:#fff; }
  circle { fill:red; stroke:white; stroke-width:0.5; }
</style>
</head>
<body>

<svg id="map" width="800" height="400" viewBox="0 0 800 400"></svg>

<script>

import {mhToLatLong} from '../lib/geo.js';

// --- Projection: equirectangular ---
function project(lat, lon) {
    const width = 800, height = 400;
    const x = (lon + 180) * (width / 360);
    const y = (90 - lat) * (height / 180);
    return [x, y];
}

// --- Add marker to SVG ---
function addMarker(svg, lat, lon, label) {
    const [x, y] = project(lat, lon);
    const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    circle.setAttribute("cx", x);
    circle.setAttribute("cy", y);
    circle.setAttribute("r", 4);
    svg.appendChild(circle);

    const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
    text.setAttribute("x", x + 6);
    text.setAttribute("y", y + 3);
    text.textContent = label;
    svg.appendChild(text);
}

// --- Main ---
const svg = document.getElementById("map");

// Example squares (London, New York, Tokyo)
const squares = ["IO91", "FN30", "PM95"];
for (let sq of squares) {
    const {lat, lon} = mhToLatLong(sq);
    addMarker(svg, lat, lon, sq);
}
</script>

</body>
</html>
